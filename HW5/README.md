# HW5

**Выдано: 24.03.2024, дедлайн 03.04.2024 18:59 по МСК**

## Важно: автоматические 0 баллов за работу, если:

* Красный CI (даже если падает только scalafmt);
* Если CI проходит, **но было выполнено 0 тестов**;
* Если есть действия после дедлайна, которые меняют код;

## Играемся с Monoid, Semigroup и Functor

### Дан следующие описания типов

```scala
package types

final case class Last[+T](value: Option[T])

final case class Point[+T](x: T, y: T, z: T)

sealed trait Tree[+T]

final case class Leaf[+T](value: T) extends Tree[T]

final case class Branch[+T](value: T, left: Tree[T], right: Tree[T]) extends Tree[T]

object Nil extends Tree[Nothing]
```

Запрещается в приведённом фрагменте кода:

* Менять сигнатуры;
* Менять модификаторы доступа;
* Менять пакеты;

### Задание

* Реализуйте для типов `Last`, `Three` и `Point` инстансы `Semigroup`, `Monoid` и `Functor` (не забудьте что должны
  выполняться соответствующие _законы_);
* Допишите тесты если требуется;

### Даны следующие сигнатуры функций

```scala
package object utils {
  def const[F[_] : Functor, T](const: T)(other: F[_]): F[T] = ???

  def fst[F[_] : Functor, T](other: F[(T, _)]): F[T] = ???

  def snd[F[_] : Functor, T](other: F[(_, T)]): F[T] = ???

  def tupled[F[_] : Functor, A, B](other: F[A], f: A => B): F[(A, B)] = ???

  def times[F[_] : Functor, A: Semigroup](other: F[A], repeat: Int): F[A] = ???
}
```

Запрещается в приведённом фрагменте кода:

* Менять сигнатуры;
* Менять модификаторы доступа;
* Менять пакеты;

**PS**:

* Для использования синтаксиса сделайте нужный импорт:
    * `import cats.implicits.toFunctorOps`
    * `import cats.implicits.catsSyntaxSemigroup`
    * `import cats.implicits.catsSyntaxMonoid`

### Задание

* Напишите реализацию функций исходя из их сигнатуры;
* Допишите тесты если требуется;

## Создаём свой typeclass

### Даны следующие сигнатуры функций

```scala
package object env {
  def getEnvs[F[_] : Functor : Env](envName: String): F[Option[String]] = ???
}
```

Запрещается в приведённом фрагменте кода:

* Менять сигнатуры;
* Менять модификаторы доступа;
* Менять пакеты;

### Задание

* Напишите свой typeclass `Env` (умеет безопасно доставать переменные окружения по имени), и добавьте три реализации:
    * `Env` который возвращает только переменные из Map переданной при инициализации;
    * `Env` который возвращает всегда "scala";
    * `Env` который возвращает переменные из окружения;
* Добавьте синтаксис для `Map[String, String]` - метод `toEnv`;
* Допишите тесты если требуется;

## Ссылки:

* [Type classes](https://docs.scala-lang.org/scala3/book/ca-type-classes.html)
* [Scala with cats](https://www.scalawithcats.com/dist/scala-with-cats.html)

### Code Style:

Мы последовательно вводим список запрещенных механик, которыми нельзя пользоваться при написании кода, и рекомендаций по
code style. За нарушения мы оставляем за собой право **снижать оценку**.

* Переменные и функции должны иметь осмысленные названия;
* Тест классы именуются `<ClassName>Spec`, где `<ClassName>` - класс к которому пишутся тесты;
* Тест классы находятся в том же пакете, что и класс к которому пишутся тесты (например, класс `WeekDay` находится в
  пакете `weekday` в директории `src/main/scala/weekday`, значит его тест класс `WeekDaySpec` должен быть в том же
  пакете в директории `src/test/scala/weekday`);
* Каждый тест должен быть в отдельном test suite;
* Использовать java коллекции запрещается (используйте `Scala` коллекции);
* Использовать `mutable` коллекций запрещается (используйте `immutable` коллекции);
* Использовать `var` запрещается;
* Использовать `return` запрещается;
* Использовать `this` запрещается (можно использовать `self` внутри класса);
* Использовать `throw` запрещено (используйте `Either` или `Option`);
* Использование не безопасных вызовов **разрешено только в тестах** (например `.get` у `Option`);
* Использование `is/asInstanceOf` запрещено (используйте `match`);
* Не используйте `match`, когда достаточно `map`;
* Не используйте `fold`, когда достаточно `map`;

PS: Правила работают по логике всё что не запрещено - то разрешено.
